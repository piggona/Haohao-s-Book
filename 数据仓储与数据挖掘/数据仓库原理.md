# 数据仓库原理

> 数据仓库(Data Warehouse)是面向主题的(Subject-oriented)，集成的(Integrated)，时变的(time-variant)，和非易失的(nonvolatile)数据集合，支持<font color=#ff0033>管理决策过程</font>

## 数据仓库的简单定义

简单来说，数据仓库就是建立为决策所见的，没有其它冗余数据（数据清除），集成化（统计整合）的转换数据库，与操作数据库同时存在。

## 数据仓库的特性

### 时变性：

- 数据仓库的时间跨度显著地比操作数据库长：
  - 操作数据库：当前值数据
  - 数据仓库数据：从历史的角度提供数据（如，过去5-10年）
- 数据仓库的每个键结构都显示或隐式的包含时间元素

### 非易失：

- 从操作环境转换过来的数据物理地分离存放（与操作数据库彻底分离）

- 数据的更新不在数据仓库环境中出现

  不需要事务处理，恢复，和并发控制机制

  只需要两种数据存取操作：数据的初始化装入和数据访问

## 数据仓库与操作数据库的区别（OLAP&OLTP）

> OLTP(on-line transaction processing,联机事务处理)
>
> OLAP(on-line analytical processing,联机分析处理)：
>
> - 数据仓库系统的主要任务
> - 数据分析和决策制定上提供服务

总结来说，OLTP vs OLAP

| 比较项目     | OLTP                                                         | OLAP                                                         |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 用户         | 办事员，IT从业人员                                           | 知识工人                                                     |
| 功能         | 日常操作                                                     | 决策支持                                                     |
| DB设计       | 面向应用                                                     | 面向<font color=#ff0033>主题</font>                          |
| 数据         | previous(当前，最新的)，detail(细节的，展平关系的)，distinct(孤立的) | historical(历史的)，statistical(汇总的，多维的，集成的，加固的) |
| 用法         | 重复使用                                                     | 具体问题具体分析                                             |
| 访问         | 读/写，在主键上索引/散列                                     | 大量扫描                                                     |
| 工作单位     | 短的，简单的事务                                             | 复杂的查询                                                   |
| 访问的记录量 | 数以十计                                                     | 数百万                                                       |
| 数据库大小   | 100MB-GB                                                     | 100GB-TB                                                     |
| 度量         | 事务吞吐量                                                   | 查询吞吐量，响应时间                                         |

## 数据仓库应用举例

### 关于应用举例的心得收获：

- 决策支持系统的数据仓库
  - 建立时的方向可以分为时间维度与列维度（列维度可以有多个维度）
  - 建立数据仓库的过程可以按照树型结构，维度可以引申出子维度。（如国家->省->市)
- 分析时数据表的钻取可以尽量取两个极端进行进一步钻取（正负）